# ­Ъћј рЃарЃћрЃљрЃџрЃБрЃарЃў `nixos-rebuild` error-рЃћрЃЉрЃўрЃА рЃњрЃљрЃарЃЕрЃћрЃЋрЃљ

рЃДрЃЋрЃћрЃџрЃљ рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў рЃљрЃарЃўрЃА **рЃарЃћрЃљрЃџрЃБрЃарЃў, рЃбрЃўрЃърЃБрЃарЃў рЃЊрЃљ рЃ«рЃерЃўрЃарЃљрЃЊ рЃерЃћрЃЏрЃ«рЃЋрЃћрЃЊрЃарЃў**.

---

## рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў 1 Рђћ Evaluation error (рЃДрЃЋрЃћрЃџрЃљрЃќрЃћ рЃњрЃљрЃЋрЃарЃфрЃћрЃџрЃћрЃЉрЃБрЃџрЃў)

### рЃАрЃўрЃЏрЃърЃбрЃЮрЃЏрЃў

```text
error: The option `services.foo.enable' does not exist.
```

### рЃарЃљрЃА рЃюрЃўрЃерЃюрЃљрЃЋрЃА рЃарЃћрЃљрЃџрЃБрЃарЃљрЃЊ

рЃћрЃА **рЃљрЃа рЃљрЃарЃўрЃА build error**.
рЃћрЃА рЃюрЃўрЃерЃюрЃљрЃЋрЃА рЃћрЃарЃЌ-рЃћрЃарЃЌрЃА:

* option рЃљрЃа рЃљрЃарЃАрЃћрЃЉрЃЮрЃЉрЃА 25.11-рЃерЃў
* рЃљрЃарЃљрЃАрЃгрЃЮрЃа namespace-рЃерЃў рЃгрЃћрЃа
* рЃЊрЃЮрЃЎрЃБрЃЏрЃћрЃюрЃбрЃљрЃфрЃўрЃљ рЃФрЃЋрЃћрЃџрЃўрЃљ

---

### рЃарЃЮрЃњрЃЮрЃа рЃЋрЃЎрЃўрЃЌрЃ«рЃБрЃџрЃЮрЃЉрЃЌ рЃАрЃгрЃЮрЃарЃљрЃЊ

#### рЃюрЃљрЃЉрЃўрЃ»рЃў 1 Рђћ рЃЋрЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃЌ option-рЃА

```bash
nixos-option services.foo.enable
```

рЃЌрЃБ рЃЏрЃўрЃўрЃдрЃћ:

```text
error: option does not exist
```

РъА№ИЈ **рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ рЃерЃћрЃюрЃўрЃљ, рЃљрЃарЃљ Nix-рЃўрЃА**

---

### рЃАрЃгрЃЮрЃарЃў рЃљрЃќрЃарЃЮрЃЋрЃюрЃћрЃЉрЃљ

РЮї *РђърЃюрЃўрЃЦрЃАрЃў рЃњрЃљрЃцрЃБрЃГрЃЊрЃљРђю*
РюЁ *РђърЃЏрЃћ рЃљрЃарЃљрЃАрЃгрЃЮрЃа abstraction level-рЃќрЃћ рЃЋрЃгрЃћрЃаРђю*

---

## рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў 2 Рђћ Attribute missing (flake wiring error)

### рЃАрЃўрЃЏрЃърЃбрЃЮрЃЏрЃў

```text
error: attribute 'packages' missing
```

рЃљрЃю

```text
error: attribute 'nixosConfigurations' missing
```

---

### рЃарЃљрЃА рЃюрЃўрЃерЃюрЃљрЃЋрЃА

flake-рЃерЃў **рЃљрЃарЃљрЃАрЃгрЃЮрЃарЃљрЃЊ рЃљрЃарЃўрЃА рЃерЃћрЃЎрЃарЃБрЃџрЃў graph**.

рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃљрЃЊ:

```nix
outputs = { self, nixpkgs }: {
  laptop = nixpkgs.lib.nixosSystem { ... };
};
```

РЮї рЃљрЃарЃљрЃАрЃгрЃЮрЃарЃўрЃљ
РюЁ рЃБрЃюрЃЊрЃљ рЃўрЃДрЃЮрЃА:

```nix
outputs = { self, nixpkgs }: {
  nixosConfigurations.laptop =
    nixpkgs.lib.nixosSystem { ... };
};
```

---

### рЃарЃЮрЃњрЃЮрЃа рЃЋрЃЎрЃўрЃЌрЃ«рЃБрЃџрЃЮрЃЉрЃЌ рЃљрЃАрЃћрЃЌ error-рЃА

```bash
sudo nixos-rebuild switch --flake .#laptop --show-trace
```

рЃЊрЃљ рЃћрЃФрЃћрЃЉ:

```text
while evaluating the attribute 'nixosConfigurations'
```

РъА№ИЈ **рЃћрЃА рЃДрЃЮрЃЋрЃћрЃџрЃЌрЃЋрЃўрЃА wiring рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљрЃљ**

---

## рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў 3 Рђћ Build failure (рЃюрЃљрЃЏрЃЊрЃЋрЃўрЃџрЃў build рЃърЃарЃЮрЃЉрЃџрЃћрЃЏрЃљ)

### рЃАрЃўрЃЏрЃърЃбрЃЮрЃЏрЃў

```text
error: builder for '/nix/store/abcd1234.drv' failed
```

---

### рЃарЃљрЃА рЃюрЃўрЃерЃюрЃљрЃЋрЃА

* рЃърЃљрЃЎрЃћрЃбрЃў рЃЋрЃћрЃа рЃљрЃўрЃњрЃЮ
* dependency missing
* test рЃЕрЃљрЃЋрЃљрЃарЃЊрЃљ

---

### рЃарЃЮрЃњрЃЮрЃа рЃЋрЃЎрЃўрЃЌрЃ«рЃБрЃџрЃЮрЃЉрЃЌ рЃАрЃгрЃЮрЃарЃљрЃЊ

#### рЃюрЃљрЃЉрЃўрЃ»рЃў 1 Рђћ рЃЋрЃюрЃљрЃ«рЃЮрЃЌ рЃЎрЃЮрЃюрЃЎрЃарЃћрЃбрЃБрЃџрЃў рЃџрЃЮрЃњрЃў

```bash
nix log /nix/store/abcd1234.drv
```

рЃарЃћрЃљрЃџрЃБрЃарЃў рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў:

```text
error: cannot find -lX11
```

РъА№ИЈ рЃћрЃА **рЃљрЃа рЃљрЃарЃўрЃА nixos error**, рЃћрЃА рЃљрЃарЃўрЃА **upstream build error**

---

### рЃљрЃЊрЃЏрЃўрЃюрЃўрЃАрЃбрЃарЃљрЃбрЃЮрЃарЃўрЃА рЃњрЃљрЃЊрЃљрЃгрЃДрЃЋрЃћрЃбрЃўрЃџрЃћрЃЉрЃљ

| рЃАрЃўрЃбрЃБрЃљрЃфрЃўрЃљ        | рЃЦрЃЏрЃћрЃЊрЃћрЃЉрЃљ           |
| --------------- | ----------------- |
| рЃџрЃЮрЃЎрЃљрЃџрЃБрЃарЃў рЃърЃљрЃЎрЃћрЃбрЃў | fix overlay       |
| upstream рЃърЃљрЃЎрЃћрЃбрЃў | downgrade / patch |
| рЃљрЃарЃљрЃАрЃљрЃГрЃўрЃарЃЮ       | remove config     |

---

## рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў 4 Рђћ Activation error (рЃДрЃЋрЃћрЃџрЃљрЃќрЃћ рЃЏрЃќрЃљрЃЎрЃЋрЃарЃБрЃџрЃў)

### рЃАрЃўрЃЏрЃърЃбрЃЮрЃЏрЃў

```text
activating the configuration...
warning: the following units failed:
  nginx.service
```

rebuild рЃЊрЃљрЃАрЃарЃБрЃџрЃЊрЃљ, рЃЏрЃљрЃњрЃарЃљрЃЏ рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ **рЃюрЃљрЃ«рЃћрЃЋрЃарЃљрЃЊ рЃЏрЃЎрЃЋрЃЊрЃљрЃарЃўрЃљ**.

---

### рЃарЃЮрЃњрЃЮрЃа рЃЋрЃЎрЃўрЃЌрЃ«рЃБрЃџрЃЮрЃЉрЃЌ

```bash
systemctl status nginx.service
```

рЃљрЃю:

```bash
journalctl -u nginx.service
```

рЃарЃћрЃљрЃџрЃБрЃарЃў рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў:

```text
bind() to 0.0.0.0:80 failed (permission denied)
```

РъА№ИЈ рЃћрЃА **runtime рЃЎрЃЮрЃюрЃцрЃџрЃўрЃЦрЃбрЃўрЃљ**, рЃљрЃарЃљ nix рЃърЃарЃЮрЃЉрЃџрЃћрЃЏрЃљ

---

## рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў 5 Рђћ РђърЃДрЃЋрЃћрЃџрЃљрЃцрЃћрЃарЃў рЃљрЃўрЃњрЃЮ, рЃЏрЃљрЃњрЃарЃљрЃЏ рЃљрЃа рЃЕрЃљрЃўрЃбрЃЋрЃўрЃарЃЌрЃљРђю

### рЃАрЃўрЃЏрЃърЃбрЃЮрЃЏрЃў

* boot-рЃќрЃћ black screen
* рЃљрЃю service-рЃћрЃЉрЃў рЃљрЃа рЃўрЃарЃЌрЃЋрЃћрЃЉрЃљ

---

### рЃарЃЮрЃњрЃЮрЃа рЃЋрЃЎрЃўрЃЌрЃ«рЃБрЃџрЃЮрЃЉрЃЌ рЃАрЃгрЃЮрЃарЃљрЃЊ

#### рЃюрЃљрЃЉрЃўрЃ»рЃў 1 Рђћ рЃФрЃЋрЃћрЃџрЃў boot-рЃћрЃЉрЃўрЃА рЃюрЃљрЃ«рЃЋрЃљ

```bash
journalctl --list-boots
```

```text
-1  2025-01-10
 0  2025-01-18
```

#### рЃюрЃљрЃЉрЃўрЃ»рЃў 2 Рђћ рЃгрЃўрЃюрЃљ boot-рЃўрЃА рЃџрЃЮрЃњрЃў

```bash
journalctl -b -1
```

рЃљрЃЦ рЃЕрЃљрЃюрЃА **рЃќрЃБрЃАрЃбрЃљрЃЊ рЃАрЃљрЃЊ рЃЏрЃЮрЃЎрЃЋрЃЊрЃљ рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ**.

---

## рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў 6 Рђћ Home Manager-рЃўрЃА рЃљрЃарЃљрЃАрЃгрЃЮрЃарЃў рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃљ (рЃЎрЃџрЃљрЃАрЃўрЃЎрЃљ)

### рЃАрЃўрЃЏрЃърЃбрЃЮрЃЏрЃў

```text
zsh: command not found: home-manager
```

рЃљрЃю:

```text
home-manager switch
```

---

### рЃарЃљрЃА рЃюрЃўрЃерЃюрЃљрЃЋрЃА

Home Manager **рЃљрЃа рЃљрЃарЃўрЃА system tool**.

рЃЌрЃБ Home Manager flake-рЃўрЃЌрЃљрЃљ рЃЏрЃўрЃЉрЃЏрЃБрЃџрЃў:

* рЃўрЃА рЃўрЃФрЃљрЃ«рЃћрЃЉрЃљ `nixos-rebuild`-рЃўрЃА рЃерЃўрЃњрЃюрЃўрЃЌ
* рЃфрЃљрЃџрЃЎрЃћ рЃњрЃљрЃерЃЋрЃћрЃЉрЃљ рЃАрЃљрЃГрЃўрЃарЃЮ рЃљрЃа рЃљрЃарЃўрЃА

РъА№ИЈ рЃћрЃА рЃљрЃарЃдрЃЋрЃћрЃЋрЃА **System/User рЃАрЃљрЃќрЃдрЃЋрЃљрЃарЃА**

---

## ­ЪДа рЃЮрЃЦрЃарЃЮрЃА рЃЕрЃћрЃЦрЃџрЃўрЃАрЃбрЃў (рЃЊрЃљрЃўрЃЏрЃљрЃ«рЃАрЃЮрЃЋрЃарЃћ)

рЃЎрЃўрЃЌрЃ«рЃЋрЃўрЃАрЃљрЃА рЃДрЃЮрЃЋрЃћрЃџрЃЌрЃЋрЃўрЃА рЃ░рЃЎрЃўрЃЌрЃ«рЃћ рЃАрЃљрЃЎрЃБрЃЌрЃљрЃа рЃЌрЃљрЃЋрЃА:

1. **Evaluation рЃЕрЃљрЃЋрЃљрЃарЃЊрЃљ?** Рєњ nix syntax / option
2. **Build рЃЕрЃљрЃЋрЃљрЃарЃЊрЃљ?** Рєњ `nix log`
3. **Activation рЃЕрЃљрЃЋрЃљрЃарЃЊрЃљ?** Рєњ `journalctl`
4. **Boot рЃЕрЃљрЃЋрЃљрЃарЃЊрЃљ?** Рєњ previous generation logs

рЃЌрЃБ рЃљрЃЏ рЃЮрЃЌрЃ«рЃА рЃЋрЃћрЃа рЃљрЃарЃЕрЃћрЃЋ Рєњ **рЃџрЃЮрЃњрЃА рЃЋрЃћрЃа рЃгрЃљрЃўрЃЎрЃўрЃЌрЃ«рЃљрЃЋ**
